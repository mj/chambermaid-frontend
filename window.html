<!DOCTYPE html> 
<html>
    <head>
	    <meta charset="utf-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1"> 
	    <title>Single page template</title> 
	    <link rel="stylesheet" href="jquery.mobile-1.2.0.min.css" />
	    <script src="jquery-1.8.3.min.js"></script>
	    <script src="jquery.mobile-1.2.0.min.js"></script>
    </head> 

    <body> 

        <div data-role="page">
	        <div data-role="header">
		        <h1 id="label-label">?</h1>
	        </div><!-- /header -->

	        <div data-role="content">
	            <h3>Status</h3>

                <ul data-role="listview" data-inset="true">
                    <li>
                        Battery
                        <p class="ui-li-aside"><strong id="label-battery">?</strong></p>
                    </li>
                    <li>
                        Reliability
                        <p class="ui-li-aside"><strong id="label-reliability">?</strong></p>
                    </li>
                    <li>
                        Window
                        <p class="ui-li-aside"><strong id="label-window">?</strong></p>
                    </li>
                </ul>
	        </div>

            <script src="Class.js"></script>
            <script src="Loader.js"></script>
            <script src="DeviceLoader.js"></script>
            <script src="ParameterParser.js"></script>

            <script type="text/javascript">
                $(document).bind("pageshow", function() {
                    $.mobile.showPageLoadingMsg();

                    var dataHandler = function(device) {
                        $("#label-label").html(device.label);
                        $("#label-battery").html(device.battery);
                        $("#label-reliability").html(device.reliability);
                        $("#label-window").html(device.window);

                        $.mobile.hidePageLoadingMsg();
                    }

                    var parser = new ParameterParser();

                    var loader = new DeviceLoader(false, dataHandler);
                    loader.load(parser.getToken("device"));
                });
            </script>
	    </div>
    </body>
</html>
